{
  "kind": "build_request",
  "title": "Connect and verify custom domain https://www.x39matrix.com with ICP canister + redirect/diagnostics updates",
  "priority": "normal",
  "requirements": [
    {
      "id": "REQ-38",
      "text": "Update the domain strategy and release documentation to include an operator-ready procedure for mapping and verifying the satellite domain `x39matrix.com` and its `www` host (`www.x39matrix.com`) against the existing deployed Internet Computer frontend canister, aligned with the canonical-domain strategy (canonical remains `https://x39matrix.org`).",
      "target": "frontend",
      "source": {
        "messageIds": [
          "msg-4"
        ],
        "quotes": [
          "Estoy listo para vincular con  Https://www.x39matrix.com"
        ]
      },
      "acceptanceCriteria": [
        "`frontend/docs/release/domain-strategy-and-hardening.en.md` explicitly covers `x39matrix.com` and `www.x39matrix.com` mapping/verification steps (DNS records, IC Dashboard custom domain registration, and expected outcomes).",
        "`frontend/docs/release/go-live-runbook-2026-03-15.en.md` includes a clear section for adding/verifying `x39matrix.com` + `www.x39matrix.com` as satellite domains, including how redirects should behave to the canonical domain while preserving path/query/hash.",
        "`frontend/docs/release/launch-verification-checklist.en.md` includes explicit post-cutover checks that `https://www.x39matrix.com` reaches the deployed app and then redirects to `https://x39matrix.org` (or otherwise behaves per the documented redirect strategy).",
        "All newly added documentation text is in English."
      ]
    },
    {
      "id": "REQ-39",
      "text": "Enhance the in-app Domain & DNS verification UX so an operator can validate `https://www.x39matrix.com` specifically (in addition to the canonical domain), including clear English guidance for the most common failure modes (DNS target mismatch, default Nginx page symptom, TLS provisioning delay, missing IC Dashboard custom-domain registration).",
      "target": "frontend",
      "source": {
        "messageIds": [
          "msg-4"
        ],
        "quotes": [
          "Estoy listo para vincular con  Https://www.x39matrix.com"
        ]
      },
      "acceptanceCriteria": [
        "When accessed from `https://www.x39matrix.com`, the diagnostics UI provides guidance that is correct for a satellite domain (i.e., it should not misleadingly instruct the operator to “stay on the canonical domain” as the only resolution if the operator’s goal is to verify the satellite-domain mapping/redirect).",
        "The diagnostics report/output includes the current origin and clearly enumerates that `x39matrix.com` is a satellite domain and that `www.x39matrix.com` is expected to redirect to `https://x39matrix.org` while preserving deep links.",
        "All new/modified user-facing strings introduced by this change are in English and follow the existing translation approach (do not edit immutable hook files or any file under `frontend/src/components/ui`)."
      ]
    },
    {
      "id": "REQ-40",
      "text": "Update connectivity/domain diagnostics logic to add satellite-domain-aware checks for `x39matrix.com`/`www.x39matrix.com`, so the diagnostics can distinguish between (a) correct satellite mapping + redirect expectation and (b) broken mapping (e.g., default Nginx page, wrong DNS targets) and present actionable next steps.",
      "target": "frontend",
      "source": {
        "messageIds": [
          "msg-4"
        ],
        "quotes": [
          "Estoy listo para vincular con  Https://www.x39matrix.com"
        ]
      },
      "acceptanceCriteria": [
        "Diagnostics checks include explicit satellite-domain handling for `x39matrix.com` and `www.x39matrix.com` (recognize them as satellites; detect/report when running on them).",
        "If the app is reached via `www.x39matrix.com`, diagnostics can communicate whether the current behavior matches the documented redirect strategy (client-side best-effort redirect to `https://x39matrix.org` preserving path/query/hash).",
        "No redirect loops are introduced; deep links (path/query/hash) remain preserved by redirect behavior.",
        "No changes are made to immutable paths: `frontend/src/hooks/useInternetIdentity.ts(x)`, `frontend/src/hooks/useActor.ts`, `frontend/src/main.tsx`, or anything inside `frontend/src/components/ui`."
      ]
    }
  ],
  "constraints": [
    "Frontend must not modify any files under immutable paths listed in SYSTEM_CONTEXT (especially `frontend/src/hooks/useInternetIdentity.ts(x)`, `frontend/src/hooks/useActor.ts`, `frontend/src/main.tsx`, and anything in `frontend/src/components/ui`).",
    "Keep canonical domain as `https://x39matrix.org` and treat `x39matrix.com`/`www.x39matrix.com` as satellite domains unless the user explicitly requests changing the canonical domain.",
    "All new or modified user-facing text must be English."
  ],
  "nonGoals": [
    "Implementing third-party DNS provider automation or APIs (e.g., Namecheap/Cloudflare API integrations).",
    "Building a marketing/promotion distribution plan.",
    "Changing backend canister logic or adding new backend endpoints for domain connection."
  ],
  "imageRequirements": {
    "required": [],
    "edits": []
  }
}